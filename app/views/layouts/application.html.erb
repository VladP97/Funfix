<!DOCTYPE html>
<html>
<head>
  <title>Funfix</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag :defaults %>
  <% content_for :javascript_includes do %>
    <%= javascript_include_tag "search.js" %>
  <% end %>
  <%= csrf_meta_tags %>
  <%= action_cable_meta_tag %>
</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <%= link_to 'Fanfics', root_path, { class: "navbar-brand"} %>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">

      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <div class="input-group search">
            <%= form_tag(read_fanfics_path, method: "get") do %>
              <%= text_field_tag(:criteria, nil, {class: "form-control search-input"}) %>
              <%= hidden_field_tag "search", "search" %>
              <span class="input-group-btn">
                <%= submit_tag("Search", {class: "btn btn-secondary search-button"}) %>
              </span>
            <% end %>
          </div>
        </li>
        <% if user_signed_in? %>
          <li class="nav-item">
            <span>Здравствуйте, <%= current_user.login %></span>
            <%= link_to 'Личный кабинет', person_path(current_user.id), :method => :get, :class => "nav-link" %>
            <%= link_to 'Выйти', destroy_user_session_path, :method => :delete, :class => "nav-link" %>
          </li>
        <% else %>
          <li class="nav-item" style="margin: auto 5% auto 0;">
            <%= link_to 'Зарегистрироваться', new_user_registration_path, :class => "nav-link" %>
            <%= link_to 'Войти', new_user_session_path, :class => "nav-link" %>
          </li>
        <% end %>
      </ul>
    </div>
  </nav>

  <%= yield %>

</body>
</html>
